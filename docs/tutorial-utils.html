<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Tutorial: Utils</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: Utils</h1>

    <section>

<header>
    

    <h2>Utils</h2>
</header>

<article>
    <h1>Utils</h1>
<p>Here are some useful utils built in Hikaru, you can get them from <code>hikaru.utils</code> and use them in plugins and scripts. However, some functions are not designed for plugins, they are used inside Hikaru, you may not use them and use others.</p>
<h1><code>escapeHTML(str)</code></h1>
<ul>
<li><code>str</code>: <code>String</code></li>
<li>Return type: <code>String</code></li>
</ul>
<p>Escape <code>&amp;</code>, <code>&lt;</code>, <code>&gt;</code> <code>&quot;</code>, and <code>''</code> in <code>str</code>.</p>
<h1><code>matchFiles(pattern, options)</code></h1>
<ul>
<li><code>pattern</code>: <code>String</code></li>
<li><code>options</code>: <code>Object</code></li>
<li>Return type: <code>Promise&lt;List&gt;</code></li>
</ul>
<p>A wrapper for <a href="https://github.com/isaacs/node-glob">node-glob</a>, match files and return a Promise, when it resolves, return an array of file path.</p>
<h1><code>removeControlChars(str)</code></h1>
<ul>
<li><code>str</code>: <code>String</code></li>
<li>Return type: <code>String</code></li>
</ul>
<p>Remove XML control chars in <code>str</code>.</p>
<h1><code>transposeYAMLTime(datetime)</code></h1>
<ul>
<li><code>datetime</code>: <code>Date</code> or <code>String</code></li>
<li>Return type: <code>String</code></li>
</ul>
<p>YAML ignores local timezone and parse time as UTC, this helper transpose it to a time without timezone info, so you can manage timezone your self.</p>
<h1><code>parseFrontMatter(file)</code></h1>
<ul>
<li><code>file</code>: <code>Hikaru::types.File</code></li>
<li>Return type: <code>Hikaru::types.File</code></li>
</ul>
<p>This helper receives a file object, and if it is a text file, it will parse the YAML front matter, copy some property to file, and transpose timezone and language. Then return the file.</p>
<h1><code>getContentType(docPath)</code></h1>
<ul>
<li><code>docPath</code>: <code>String</code></li>
<li>Return type: <code>String</code></li>
</ul>
<p>This is used by Hikaru's HTTP server. It will return value for <code>Content-Type</code> by comparing the extend name.</p>
<h1><code>paginate(p, posts, perPage = 10, ctx)</code></h1>
<ul>
<li><code>p</code>: <code>Hikaru::types.File</code></li>
<li><code>posts</code>: <code>Hikaru::types.File[]</code></li>
<li><code>perPage</code>: <code>Number</code></li>
<li><code>ctx</code>: <code>Object</code></li>
<li>Return type: <code>Hikaru::types.File[]</code></li>
</ul>
<p>Generate pages for a page that displays posts, each page contains <code>perPage</code> posts. For example, index and archives.</p>
<p>It returns an array of paginated pages, and each element in this array will have two property: <code>pageArray</code> and <code>pageIndex</code>. <code>pageArray</code> is the returned array, so you can get other pages while rendering one page. <code>pageIndex</code> is just this element's index.</p>
<p>The original page <code>p</code> is <code>0</code>, other generated page will get a <code>docPath</code> like <code>{p's basename}-{index + 1}.html</code>. For example, if p's <code>docPath</code> is <code>archives/index.html</code>, following pages will be <code>archives/index-2.html</code>, <code>archives/index-3.html</code>, etc.</p>
<h1><code>sortCategories(category)</code></h1>
<ul>
<li><code>category</code>: <code>Hikaru::types.Category</code></li>
<li>Return type: <code>undefined</code></li>
</ul>
<p>Because each <code>Category</code> is recursive, if you want to sort posts with date sequence, you need to sort recursively. This helper do this.</p>
<h1><code>paginateCategories(category, parentPath, perPage = 10, site)</code></h1>
<ul>
<li><code>category</code>: <code>Hikaru::types.Category</code></li>
<li><code>parentPath</code>: <code>String</code></li>
<li><code>perPage</code>: <code>Number</code></li>
<li><code>site</code>: <code>Hikaru::types.Site</code></li>
<li>Return type: <code>Hikaru::types.File[]</code></li>
</ul>
<p><code>Category</code> and <code>Tag</code> page cannot be simply paginated with <code>paginate(p, posts, perPage = 10, ctx)</code>, because you need to create page for each categories and tags, and for categories, you need to do this recursively, this helper help you create recursive paths for categories.</p>
<p>Hikaru always starts <code>parentPath</code> with the option <code>categoryDir</code> in site config file.</p>
<h1><code>getPathFn(rootDir = path.posix.sep)</code></h1>
<ul>
<li><code>rootDir</code>: <code>String</code></li>
<li>Return type: <code>getPath(docPath = &quot;&quot;)</code></li>
</ul>
<p>Your site maybe a sub directory, and when you convert sources to docs, you have to add dir prefix for links. This helper can receive a prefix and returns you a function that convert <code>docPath</code> to a full path for links. So you just pass <code>getPath</code> to templates and use it when you create a link. Recommended this instead handle href yourself.</p>
<p><strong>This helper always deal <code>docPath</code> as a relative path to <code>rootDir</code>, so if you want to handle some path relative to other path, please join them before pass it to this healper.</strong></p>
<h1><code>getURLFn(baseURL, rootDir = path.posix.sep)</code></h1>
<ul>
<li><code>baseURL</code>: <code>String</code></li>
<li><code>rootDir</code>: <code>String</code></li>
<li>Return type: <code>getURL(docPath = &quot;&quot;)</code></li>
</ul>
<p>Sometimes you need full URL instead a internal path, this help you make up a base URL and a path prefix. It calls <code>getPath()</code> to handle path internally.</p>
<h1><code>isCurrentPathFn(rootDir = path.posix.sep, currentPath = &quot;&quot;)</code></h1>
<ul>
<li><code>rootDir</code>: <code>String</code></li>
<li><code>currentPath</code>: <code>String</code></li>
<li>Return type: <code>isCurrentPath(testPath = &quot;&quot;, strict = false)</code></li>
</ul>
<p>It's not easy to decide whether to path are the same, this helper is designed for this. For each page you want to use this, use <code>isCurrentPathFn</code> with this page's <code>docPath</code>, and pass the returned <code>isCurrentPath</code> function to template, when you want to compare a path to current path, just call <code>isCurrentPath</code> in template. Recommended this instead handle by yourself.</p>
<h1><code>resolveHeaderIds($)</code></h1>
<ul>
<li><code>$</code>: Cheerio Context</li>
<li>Return type: <code>undefined</code></li>
</ul>
<p>This helper escapes header id characters and create link for them.</p>
<h1><code>genToc($)</code></h1>
<ul>
<li><code>$</code>: Cheerio Context</li>
<li>Return type: <code>Hikaru::types.Toc</code></li>
</ul>
<p>This helper generator toc for page content.</p>
<h1><code>resolveLink($, baseURL, rootDir, docPath)</code></h1>
<ul>
<li><code>$</code>: Cheerio Context</li>
<li><code>baseURL</code>: <code>String</code></li>
<li><code>rootDir</code>: <code>String</code></li>
<li><code>docPath</code>: <code>String</code></li>
<li>Return type: <code>undefined</code></li>
</ul>
<p>This function converts all <code>href</code> attribute for <code>&lt;a&gt;</code> tags in content. If it's not a internal link, add <code>target=&quot;_blank&quot;</code> for the tag. If it's an relative path, replace it to absolute path.</p>
<h1><code>resolveImage($, rootDir, docPath)</code></h1>
<ul>
<li><code>$</code>: Cheerio Context</li>
<li><code>rootDir</code>: <code>String</code></li>
<li><code>docPath</code>: <code>String</code></li>
<li>Return type: <code>undefined</code></li>
</ul>
<p>This function converts all <code>src</code> attribute for <code>&lt;img&gt;</code> tags in content. If it's an relative path, replace it to absolute path.</p>
<h1><code>highlight(str, options = {})</code></h1>
<ul>
<li><code>str</code>: <code>String</code></li>
<li><code>options</code>: <code>Object</code></li>
<li>Return type: <code>String</code></li>
</ul>
<p>Using highlight.js to highlight strings, you should pass <code>lang</code> from options.</p>
<h1><code>getVersion()</code></h1>
<ul>
<li>Return type: <code>String</code></li>
</ul>
<p>Return Hikaru's version.</p>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-generator.html">generator</a></li><li><a href="module-highlight.html">highlight</a></li><li><a href="module-hikaru.html">hikaru</a></li><li><a href="module-index.html">index</a></li><li><a href="module-logger.html">logger</a></li><li><a href="module-processor.html">processor</a></li><li><a href="module-renderer.html">renderer</a></li><li><a href="module-router.html">router</a></li><li><a href="module-translator.html">translator</a></li><li><a href="module-types.html">types</a></li><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="module-generator-Generator.html">Generator</a></li><li><a href="module-hikaru-Hikaru.html">Hikaru</a></li><li><a href="module-logger-Logger.html">Logger</a></li><li><a href="module-processor-Processor.html">Processor</a></li><li><a href="module-renderer-Renderer.html">Renderer</a></li><li><a href="module-router-Router.html">Router</a></li><li><a href="module-translator-Translator.html">Translator</a></li><li><a href="module-types-Category.html">Category</a></li><li><a href="module-types-File.html">File</a></li><li><a href="module-types-Site.html">Site</a></li><li><a href="module-types-Tag.html">Tag</a></li><li><a href="module-types-TOC.html">TOC</a></li></ul><h3>Tutorials</h3><ul><li><a href="tutorial-dev.html">Dev</a></li><li><a href="tutorial-index_.html">Overview</a></li><li><a href="tutorial-user.html">User</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Oct 28 2019 11:41:46 GMT+0800 (China Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>